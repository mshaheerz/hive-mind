# Step 3.5 — Trace Cleanup (De-branding & Source Hygiene)

Goal: When a project is copied from external generators (e.g., Google AI Studio, v0, Lovable), remove **their branding + scaffolding remnants** so the repo looks first‑party and doesn’t ship broken artifacts.

## Input (Pass Paths Only)

- `repo_root`
- `run_dir`

## Output (Persisted)

- `evidence/trace-scan.md` (what was found; paths + short notes)
- `tasks.md` (Trace cleanup checklist section: tasks + verification + evidence paths)
- Updated project files (README, HTML entrypoints, gitignore, etc.)

## Plan (Checklist Required)

Before making any edits, add a Trace cleanup checklist section to `tasks.md`.

Minimum requirements inside the plan:
- `## Tasks` as `- [ ]` items, derived from the checklist below
- `## Verification` as `- [ ]` items (commands + expected outcome)
- Evidence links to `evidence/trace-scan.md` and any other scan output

## What to Clean (Checklist)

### 1) Branding Sweep (fast scan)

Search for obvious vendor fingerprints and record hits (path + a short reason) in `evidence/trace-scan.md`:

- “AI Studio” / “Run and deploy your AI Studio app”
- `ai.studio` links
- `v0` / `v0.dev`
- “Lovable” / `loveable.dev`
- Google asset/badge URLs (e.g. `user-attachments`, `gstatic`, `googleapis`)
- “Generated by …” banners or boilerplate sections in `README.md`

### 2) README Hygiene (required)

- Remove third-party banner images and “view in X” links.
- Remove generator instructions that don’t match the repo (e.g., “npm install + set GEMINI_API_KEY…” when the project doesn’t require it).
- Replace with a clean project README (or Ship Faster template README if this is a template):
  - one-line value prop
  - features
  - quickstart
  - env vars (key names only; omit if none required)
  - scripts
  - design system link (if present)

### 3) Runtime Artifact Cleanup

Remove or exclude common “copied project” leftovers:

- Delete: `.claude/`, `runs/`, `node_modules/`, `dist/`, `.DS_Store`, `.vercel/` (if present)
- Ensure `.gitignore` covers these artifacts
- Ensure no secrets are committed (`.env.local` must never be in git)

### 4) Frontend Entry Hygiene (avoid subtle runtime bugs)

Common issues from copied starters:

- **Vite + `importmap` conflict**: if the project uses Vite bundling, remove any `<script type="importmap">` from `index.html` to avoid React being loaded twice.
- **`/index.css` 404**: remove hardcoded `<link rel="stylesheet" href="/index.css">` unless the file truly exists and is served that way. Prefer `import './index.css'` from `index.tsx`.

### 5) Environment Variable Hygiene

Goal: remove *vendor-specific* env requirements from docs unless truly required.

- Prefer **no required env vars** for demos/templates (fallback to mock output when missing).
- If a key is optional, document it as optional and default to safe behavior.
- Avoid naming env vars after vendors in docs (`GEMINI_API_KEY`, etc.). Prefer a neutral `API_KEY` when needed.

### 6) Keep Required Attribution

Don’t remove legal/license attribution if it’s required by the source or dependencies. Clean “marketing + generator fingerprints”, not legal obligations.

## Verification (must record results)

Write the final verification results into the Trace cleanup section in `tasks.md`:

- No hits for branding strings you intentionally removed
- `git status` shows no secrets / no accidental large artifacts
- App runs locally (`pnpm dev` / `npm run dev`)
- No console/runtime errors indicating double React / broken hooks
